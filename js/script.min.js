var popup=document.querySelector(".popup"),popupForm=popup.querySelector(".popup__form"),openBtn=document.querySelector(".contacts__address-form-btn"),closeBtn=popup.querySelector(".popup__form-close-cross"),submitButton=popup.querySelector(".popup__form-submit-btn"),nameInput=popup.querySelector("#popup__form-input-name"),emailInput=popup.querySelector("#popup__form-input-email"),textArea=popup.querySelector("#popup__form-input-text");function openBtnClickHandler(){popup.classList.add("popup-open"),nameInput.focus()}function closeBtnClickHandler(){popup.classList.remove("popup-open"),popupForm.reset(),emailInput.classList.remove("popup__form-input_error"),popup.classList.remove("popup__form-input_error-shake"),emailInput.removeEventListener("input",checkEmail)}function checkEmail(){""!==emailInput.value&&null===emailInput.value.match(/@/)?(emailInput.setCustomValidity("Email должен содержать @"),emailInput.classList.add("popup__form-input_error")):(emailInput.setCustomValidity(""),emailInput.classList.remove("popup__form-input_error"))}function checkInputLength(){checkEmail(),""!==emailInput.value&&""!==nameInput.value.lengt&&""!==textArea.value||(popup.classList.remove("popup__form-input_error-shake"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("popup__form-input_error-shake"))}openBtn.addEventListener("click",function(e){e.preventDefault(),openBtnClickHandler()}),closeBtn.addEventListener("click",closeBtnClickHandler),closeBtn.addEventListener("keydown",function(e){13===e.keyCode&&closeBtnClickHandler()}),document.addEventListener("keydown",function(e){27===e.keyCode&&closeBtnClickHandler()}),emailInput.addEventListener("blur",function(){emailInput.addEventListener("input",checkEmail)}),submitButton.addEventListener("click",checkInputLength);